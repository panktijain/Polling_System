{% extends "polls/base.html" %}
{% block title %}Active Polls{% endblock %}
{% block content %}
<div class="polls-header">
    <div class="polls-header-content">
        <h1 class="polls-title">ğŸ—³ï¸ Active Polls</h1>
        <p class="polls-subtitle">Explore and participate in community polls</p>
    </div>
    {% if user.is_authenticated %}
    <a href="{% url 'create_poll' %}" class="btn btn-create">+ Create Poll</a>
    {% else %}
    <a href="{% url 'register' %}" class="btn btn-create">Register to Create</a>
    {% endif %}
</div>

<div class="category-section">
    <p class="category-label">Filter by Category</p>
    <div class="category-tabs">
        <a href="{% url 'poll_list' %}" class="category-tab-btn {% if not selected_category %}active-tab{% endif %}">All Polls</a>
        {% for code, label in categories %}
            <a href="?category={{ code }}" class="category-tab-btn {% if selected_category == code %}active-tab{% endif %}">{{ label }}</a>
        {% endfor %}
    </div>
</div>

{% if polls %}
<div class="polls-list">
    {% for poll in polls %}
    <div class="card poll-card-item">
        <div class="poll-card-header-row">
            <div class="poll-title-section">
                <h2 class="poll-title"><a href="{% url 'poll_detail' poll.id %}">{{ poll.question }}</a></h2>
                <span class="category-badge">{{ poll.get_category_display }}</span>
            </div>
        </div>
        <p class="poll-meta">
            <span class="vote-count">ğŸ—³ï¸ {{ poll.total_votes }} vote{{ poll.total_votes|pluralize }}</span>
            {% if poll.created_by %}<span class="poll-author">ğŸ‘¤ by {{ poll.created_by.username }}</span>{% endif %}
        </p>
        <div class="btn-group">
            <a href="{% url 'poll_detail' poll.id %}" class="btn">Vote Now</a>
            <a href="{% url 'poll_results' poll.id %}" class="btn btn-secondary">View Results</a>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="card empty-state">
    <div class="empty-icon">ğŸ“­</div>
    <h2>No Active Polls</h2>
    <p>There are no active polls in this category yet. Be the first to create one!</p>
    {% if user.is_authenticated %}
    <a href="{% url 'create_poll' %}" class="btn">Create the First Poll</a>
    {% else %}
    <a href="{% url 'register' %}" class="btn">Register to Create Polls</a>
    {% endif %}
</div>
{% endif %}
{% endblock %}